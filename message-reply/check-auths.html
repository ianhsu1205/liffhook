<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æŸ¥çœ‹ Auths è³‡æ–™</title>
    <style>
      body {
        font-family: "Microsoft JhengHei", sans-serif;
        max-width: 1000px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #06c755;
        border-bottom: 3px solid #06c755;
        padding-bottom: 15px;
      }
      .info {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #06c755;
      }
      .error {
        background: #ffebee;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #f44336;
        color: #c62828;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }
      th {
        background: #06c755;
        color: white;
        font-weight: 600;
      }
      tr:hover {
        background: #f5f5f5;
      }
      .btn {
        padding: 10px 20px;
        background: #06c755;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        margin: 10px 5px;
      }
      .btn:hover {
        background: #00b900;
      }
      .btn-secondary {
        background: #6c757d;
      }
      .btn-secondary:hover {
        background: #5a6268;
      }
      .loading {
        text-align: center;
        padding: 40px;
        color: #666;
      }
      code {
        background: #f4f4f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: "Courier New", monospace;
      }
      .copy-btn {
        padding: 5px 10px;
        font-size: 12px;
        background: #2196f3;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-left: 10px;
      }
      .copy-btn:hover {
        background: #1976d2;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ“‹ æŸ¥çœ‹ç¾æœ‰ Auths å¸³è™Ÿ</h1>

      <div class="info">
        <strong>ğŸ“Œ èªªæ˜ï¼š</strong>æ­¤é é¢æœƒé¡¯ç¤ºè³‡æ–™åº«ä¸­æ‰€æœ‰çš„ Auth
        å¸³è™Ÿï¼Œæ‚¨å¯ä»¥ç”¨é€™äº›å¸³è™Ÿç™»å…¥ç®¡ç†ç³»çµ±ã€‚
      </div>

      <button class="btn" onclick="loadAuths()">ğŸ”„ é‡æ–°è¼‰å…¥</button>
      <button
        class="btn btn-secondary"
        onclick="window.location.href='login.html'"
      >
        ğŸ” å‰å¾€ç™»å…¥é é¢
      </button>

      <div id="result">
        <div class="loading">é»æ“Šã€Œé‡æ–°è¼‰å…¥ã€æŒ‰éˆ•æŸ¥çœ‹è³‡æ–™...</div>
      </div>
    </div>

    <script>
      // è¨­å®š API åŸºç¤è·¯å¾‘
      const base_url = (() => {
        if (
          window.location.hostname === "localhost" ||
          window.location.hostname === "127.0.0.1"
        ) {
          return window.location.origin + "/"
        }
        return "https://35.221.146.143.nip.io/linehook/"
      })()

      async function loadAuths() {
        const resultDiv = document.getElementById("result")
        resultDiv.innerHTML = '<div class="loading">â³ è¼‰å…¥ä¸­...</div>'

        try {
          // é€™è£¡éœ€è¦ä¸€å€‹ API ä¾†ç²å– Auths åˆ—è¡¨
          // ç”±æ–¼æ²’æœ‰å…¬é–‹çš„ APIï¼Œæˆ‘å€‘æä¾› SQL æŸ¥è©¢æŒ‡ä»¤

          resultDiv.innerHTML = `
                    <div class="info">
                        <strong>â„¹ï¸ æ³¨æ„ï¼š</strong>ç³»çµ±æ²’æœ‰å…¬é–‹çš„ API å¯ä»¥ç›´æ¥æŸ¥è©¢ Auths åˆ—è¡¨ã€‚
                        <br><br>
                        è«‹ä½¿ç”¨ä»¥ä¸‹æ–¹å¼æŸ¥è©¢ï¼š
                    </div>

                    <h3>æ–¹æ³•ä¸€ï¼šä½¿ç”¨è³‡æ–™åº«å·¥å…·ï¼ˆæ¨è–¦ï¼‰</h3>
                    <p>ä½¿ç”¨ pgAdminã€DBeaver æˆ–å…¶ä»– PostgreSQL å·¥å…·ï¼ŒåŸ·è¡Œä»¥ä¸‹ SQLï¼š</p>
                    <div style="background: #f4f4f4; padding: 15px; border-radius: 6px; position: relative;">
                        <pre style="margin: 0; white-space: pre-wrap;">SELECT "AppKey", "SecretKey", "Name" FROM "Auths";</pre>
                        <button class="copy-btn" onclick="copySQL('SELECT \\"AppKey\\", \\"SecretKey\\", \\"Name\\" FROM \\"Auths\\";')">ğŸ“‹ è¤‡è£½</button>
                    </div>

                    <h3>æ–¹æ³•äºŒï¼šä½¿ç”¨ dotnet ef æŒ‡ä»¤</h3>
                    <p>åœ¨å°ˆæ¡ˆç›®éŒ„åŸ·è¡Œï¼š</p>
                    <div style="background: #f4f4f4; padding: 15px; border-radius: 6px; position: relative;">
                        <pre style="margin: 0; white-space: pre-wrap;">cd D:\\project\\LineHookProject\\backend
psql -h localhost -U postgres -d YourDatabaseName -c "SELECT * FROM \\"Auths\\";"</pre>
                        <button class="copy-btn" onclick="copySQL('psql -h localhost -U postgres -d YourDatabaseName -c \\"SELECT * FROM \\\\\\"Auths\\\\\\";\\"')">ğŸ“‹ è¤‡è£½</button>
                    </div>

                    <h3>æ–¹æ³•ä¸‰ï¼šå¦‚æœæ²’æœ‰è³‡æ–™ï¼Œæ–°å¢æ¸¬è©¦å¸³è™Ÿ</h3>
                    <p>åŸ·è¡Œä»¥ä¸‹ SQL æ–°å¢æ¸¬è©¦å¸³è™Ÿï¼š</p>
                    <div style="background: #f4f4f4; padding: 15px; border-radius: 6px; position: relative;">
                        <pre style="margin: 0; white-space: pre-wrap;">INSERT INTO "Auths" ("AppKey", "SecretKey", "Name")
VALUES 
  ('550e8400-e29b-41d4-a716-446655440000'::uuid, 'admin123', 'ç³»çµ±ç®¡ç†å“¡'),
  ('660e8400-e29b-41d4-a716-446655440001'::uuid, 'test123', 'æ¸¬è©¦å¸³è™Ÿ');</pre>
                        <button class="copy-btn" onclick="copySQL('INSERT INTO \\"Auths\\" (\\"AppKey\\", \\"SecretKey\\", \\"Name\\")\\nVALUES \\n  (\\'550e8400-e29b-41d4-a716-446655440000\\'::uuid, \\'admin123\\', \\'ç³»çµ±ç®¡ç†å“¡\\'),\\n  (\\'660e8400-e29b-41d4-a716-446655440001\\'::uuid, \\'test123\\', \\'æ¸¬è©¦å¸³è™Ÿ\\');')">ğŸ“‹ è¤‡è£½</button>
                    </div>

                    <h3>æ¸¬è©¦å¸³è™Ÿè³‡è¨Š</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>AppKey</th>
                                <th>SecretKey</th>
                                <th>Name</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>550e8400-e29b-41d4-a716-446655440000</code></td>
                                <td><code>admin123</code></td>
                                <td>ç³»çµ±ç®¡ç†å“¡</td>
                                <td><button class="copy-btn" onclick="copyCredentials('550e8400-e29b-41d4-a716-446655440000', 'admin123')">ğŸ“‹ è¤‡è£½ç™»å…¥è³‡è¨Š</button></td>
                            </tr>
                            <tr>
                                <td><code>660e8400-e29b-41d4-a716-446655440001</code></td>
                                <td><code>test123</code></td>
                                <td>æ¸¬è©¦å¸³è™Ÿ</td>
                                <td><button class="copy-btn" onclick="copyCredentials('660e8400-e29b-41d4-a716-446655440001', 'test123')">ğŸ“‹ è¤‡è£½ç™»å…¥è³‡è¨Š</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info" style="margin-top: 20px;">
                        <strong>ğŸ’¡ æç¤ºï¼š</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>å¦‚æœæ‚¨å·²æœ‰ Auths è³‡æ–™ï¼Œè«‹ç›´æ¥ä½¿ç”¨ç¾æœ‰çš„ AppKey å’Œ SecretKey ç™»å…¥</li>
                            <li>å¦‚æœæ²’æœ‰è³‡æ–™ï¼Œå¯ä»¥åŸ·è¡Œä¸Šé¢çš„ SQL æ–°å¢æ¸¬è©¦å¸³è™Ÿ</li>
                            <li>å»ºè­°æŸ¥çœ‹æ‚¨çš„è³‡æ–™åº«ç¢ºèªç¾æœ‰å¸³è™Ÿ</li>
                        </ul>
                    </div>
                `
        } catch (error) {
          console.error("Error:", error)
          resultDiv.innerHTML = `
                    <div class="error">
                        <strong>âŒ éŒ¯èª¤ï¼š</strong>${error.message}
                    </div>
                `
        }
      }

      function copySQL(sql) {
        navigator.clipboard.writeText(sql).then(() => {
          alert("âœ… SQL å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼")
        })
      }

      function copyCredentials(appKey, secretKey) {
        const text = `AppKey: ${appKey}\nSecretKey: ${secretKey}`
        navigator.clipboard.writeText(text).then(() => {
          alert("âœ… ç™»å…¥è³‡è¨Šå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼\n\næ‚¨å¯ä»¥ç›´æ¥è²¼åˆ°ç™»å…¥é é¢ä½¿ç”¨ã€‚")
        })
      }

      // é é¢è¼‰å…¥æ™‚è‡ªå‹•åŸ·è¡Œ
      window.onload = function () {
        loadAuths()
      }
    </script>
  </body>
</html>
